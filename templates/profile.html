{% extends 'base.html' %}
{% import "bootstrap/wtf.html" as wtf %}

{% block head %}
<title>Profile page</title>
{% endblock %}


{% block body %}
<nav class="navbar navbar-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">
            <svg class="svg-icon" viewBox="0 0 20 20">
                <path fill="gold"
                    d="M5.229,6.531H4.362c-0.239,0-0.434,0.193-0.434,0.434c0,0.239,0.194,0.434,0.434,0.434h0.868c0.24,0,0.434-0.194,0.434-0.434C5.663,6.724,5.469,6.531,5.229,6.531 M10,6.531c-1.916,0-3.47,1.554-3.47,3.47c0,1.916,1.554,3.47,3.47,3.47c1.916,0,3.47-1.555,3.47-3.47C13.47,8.084,11.916,6.531,10,6.531 M11.4,11.447c-0.071,0.164-0.169,0.299-0.294,0.406c-0.124,0.109-0.27,0.191-0.437,0.248c-0.167,0.057-0.298,0.09-0.492,0.098v0.402h-0.35v-0.402c-0.21-0.004-0.352-0.039-0.527-0.1c-0.175-0.064-0.324-0.154-0.449-0.27c-0.124-0.115-0.221-0.258-0.288-0.428c-0.068-0.17-0.1-0.363-0.096-0.583h0.664c-0.004,0.259,0.052,0.464,0.169,0.613c0.116,0.15,0.259,0.229,0.527,0.236v-1.427c-0.159-0.043-0.268-0.095-0.425-0.156c-0.157-0.061-0.299-0.139-0.425-0.235C8.852,9.752,8.75,9.631,8.672,9.486C8.594,9.34,8.556,9.16,8.556,8.944c0-0.189,0.036-0.355,0.108-0.498c0.072-0.144,0.169-0.264,0.292-0.36c0.122-0.097,0.263-0.17,0.422-0.221c0.159-0.052,0.277-0.077,0.451-0.077V7.401h0.35v0.387c0.174,0,0.29,0.023,0.445,0.071c0.155,0.047,0.29,0.118,0.404,0.212c0.115,0.095,0.206,0.215,0.274,0.359c0.067,0.146,0.103,0.315,0.103,0.508H10.74c-0.007-0.201-0.06-0.354-0.154-0.46c-0.096-0.106-0.199-0.159-0.408-0.159v1.244c0.174,0.047,0.296,0.102,0.462,0.165c0.167,0.063,0.314,0.144,0.443,0.241c0.128,0.099,0.23,0.221,0.309,0.366c0.077,0.146,0.116,0.324,0.116,0.536C11.509,11.092,11.473,11.283,11.4,11.447 M18.675,4.795H1.326c-0.479,0-0.868,0.389-0.868,0.868v8.674c0,0.479,0.389,0.867,0.868,0.867h17.349c0.479,0,0.867-0.389,0.867-0.867V5.664C19.542,5.184,19.153,4.795,18.675,4.795M1.76,5.664c0.24,0,0.434,0.193,0.434,0.434C2.193,6.336,2,6.531,1.76,6.531S1.326,6.336,1.326,6.097C1.326,5.857,1.52,5.664,1.76,5.664 M1.76,14.338c-0.24,0-0.434-0.195-0.434-0.434c0-0.24,0.194-0.434,0.434-0.434s0.434,0.193,0.434,0.434C2.193,14.143,2,14.338,1.76,14.338 M18.241,14.338c-0.24,0-0.435-0.195-0.435-0.434c0-0.24,0.194-0.434,0.435-0.434c0.239,0,0.434,0.193,0.434,0.434C18.675,14.143,18.48,14.338,18.241,14.338 M18.675,12.682c-0.137-0.049-0.281-0.08-0.434-0.08c-0.719,0-1.302,0.584-1.302,1.303c0,0.152,0.031,0.297,0.08,0.434H2.981c0.048-0.137,0.08-0.281,0.08-0.434c0-0.719-0.583-1.303-1.301-1.303c-0.153,0-0.297,0.031-0.434,0.08V7.318c0.136,0.049,0.28,0.08,0.434,0.08c0.718,0,1.301-0.583,1.301-1.301c0-0.153-0.032-0.298-0.08-0.434H17.02c-0.049,0.136-0.08,0.28-0.08,0.434c0,0.718,0.583,1.301,1.302,1.301c0.152,0,0.297-0.031,0.434-0.08V12.682z M18.241,6.531c-0.24,0-0.435-0.194-0.435-0.434c0-0.24,0.194-0.434,0.435-0.434c0.239,0,0.434,0.193,0.434,0.434C18.675,6.336,18.48,6.531,18.241,6.531 M9.22,8.896c0,0.095,0.019,0.175,0.058,0.242c0.039,0.066,0.088,0.124,0.148,0.171c0.061,0.047,0.13,0.086,0.21,0.115c0.079,0.028,0.11,0.055,0.192,0.073V8.319c-0.21,0-0.322,0.044-0.437,0.132C9.277,8.54,9.22,8.688,9.22,8.896 M15.639,12.602h-0.868c-0.239,0-0.434,0.195-0.434,0.434c0,0.24,0.194,0.436,0.434,0.436h0.868c0.24,0,0.434-0.195,0.434-0.436C16.072,12.797,15.879,12.602,15.639,12.602 M10.621,10.5c-0.068-0.052-0.145-0.093-0.23-0.124c-0.086-0.031-0.123-0.06-0.212-0.082v1.374c0.209-0.016,0.332-0.076,0.465-0.186c0.134-0.107,0.201-0.281,0.201-0.516c0-0.11-0.02-0.202-0.062-0.277C10.743,10.615,10.688,10.551,10.621,10.5">
                </path>
            </svg>
        </a>

        {% if username == current_user.username %}
        <form class="d-flex" action="/logout">
            <button class="black-btn btn top-right-button" type="submit" data-bs-toggle="modal">
                <div class="container">
                    logout
                </div>
            </button>
        </form>
        {% elif current_user.is_authenticated %}
        <form class="d-flex" action="/profile">
            <button class="black-btn btn top-right-button" type="submit" data-bs-toggle="modal">
                <div class="container">
                    Profile
                </div>
            </button>
        </form>
        {% else %}
        <form class="d-flex loginsignup-container">
            <button class="black-btn btn top-right-button" type="button" data-bs-toggle="modal"
                data-bs-target="#loginsignup">
                <div class="container">
                    Login
                </div>
            </button>
        </form>
        {% endif %}
    </div>
</nav>

<div class="container">


    <div class="row">
        <div class="col-6" style="font-size: 6rem; width:fit-content">{{ username }}</div>
        <div class="col-6" style="font-size: 6rem; color: aliceblue; width:fit-content;">{{ username }}</div>
    </div>

    {% if current_user.confirmed == false and current_user.username == username %}

    <div class="row py-5" style="font-family: 'Roboto Mono';
    padding-left: 1vh;
    font-size: 2rem;
    color: red;">
        Please authenticate email to upload artwork
    </div>

    <div class="row py-5">
        <form class="col-6">
            <button class="black-btn btn" type="button" id="authenticationemailform">
                <div class="container" style="font-size: 2rem" id="authenticatetext">Send authentication email</div>
            </button>
        </form>
    </div>

    {% endif %}

    <div class="row">

        <div class="col-6" id="createdselect">
            <div class='pointer' style="font-family: 'Rajdhani'; font-size: 2rem;width: fit-content;">
                Created
            </div>
            <div class="hrlike profilepage-selectorline-selected"></div>
        </div>
        <div class="col-6" id="ownedselect">
            <div class='pointer' style="font-family: 'Rajdhani'; font-size: 2rem; width: fit-content;">
                Owned
            </div>
            <div class="hrlike"></div>
        </div>
    </div>

    <div class=" container py-5 px-0 d-none" id="ownedtab">
        <div class="row justify-content-left">

            <form target="_blank" action="" id="downloadimageform">
            </form>

            {% for art in ownedartpieces %}

            <div class="col-xxl-2 col-lg-3 col-md-4 col-sm-6 px-3" style="overflow: hidden">
                <div class="card">
                    <img class="card-img-top"
                        src="{{url_for('static', filename='images/artpieces_thumb/'+ art.filename)}}"
                        alt="Card image cap">

                    {% if username == current_user.username %}

                    <div class="downloadbutton" style="position:absolute; position: absolute;
                    top: 5%;
                    left: 50%;
                    height: 10%;
                    width: 40%;" id="downloadbuttonhover" name='{{art.filename}}'>
                        <svg class="svg-icon" viewBox="0 0 20 20" style="
                        border-radius: 999px;
                        background-color: white;
                        opacity: 80%;
                        height: 100%;
                        width: 100%;">
                            <path fill="black"
                                d="M9.634,10.633c0.116,0.113,0.265,0.168,0.414,0.168c0.153,0,0.308-0.06,0.422-0.177l4.015-4.111c0.229-0.235,0.225-0.608-0.009-0.836c-0.232-0.229-0.606-0.222-0.836,0.009l-3.604,3.689L6.35,5.772C6.115,5.543,5.744,5.55,5.514,5.781C5.285,6.015,5.29,6.39,5.522,6.617L9.634,10.633z">
                            </path>
                            <path fill="black"
                                d="M17.737,9.815c-0.327,0-0.592,0.265-0.592,0.591v2.903H2.855v-2.903c0-0.327-0.264-0.591-0.591-0.591c-0.327,0-0.591,0.265-0.591,0.591V13.9c0,0.328,0.264,0.592,0.591,0.592h15.473c0.327,0,0.591-0.264,0.591-0.592v-3.494C18.328,10.08,18.064,9.815,17.737,9.815z">
                            </path>
                        </svg>
                    </div>

                    {% endif %}


                    <div class="card-body p-0 clickablecard" id="img{{art.filename[:-4]}}">
                        <div class="container p-3">
                            <h5 class="card-title"> {{ art.displayname }}</h5>
                            <p class="card-text">@{{ art.madeby }}</p>
                        </div>
                        <div class="container-fluid p-0 cardprice cardborder">
                            <div class="row  py-2">
                                <div class="col float-left card-money-left">${{ art.price }}</div>
                                <div class="col float-right card-money-right">USD</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {% endfor %}

        </div>
    </div>

    <div class=" container py-5 px-0" id="createdtab">
        <div class="row justify-content-left">

            {% if username == current_user.username and current_user.confirmed %}

            <div class="col-xxl-4 col-lg-6 col-md-8 col-sm-12 px-3">

                <div class="row" style="border-radius: 20px; background-color: #f2f2f2">
                    <div class="col-md-6" style="padding: 2vh;">
                        <div class="card-create" style="background-color:white">

                            <form action="/upload" method="POST" enctype="multipart/form-data"
                                id="artcreatehovorpublish" style="position:relative">

                                <div id="hoverchangerainbow">
                                    <div class="card-img-top" id="createarthoverimage" style="height: 10vh">

                                        <div class="container d-flex align-items-center justify-content-center">
                                            <label class="col-12 uploadhover py-3" for="uploadfile"
                                                style="text-align: center;font-family: 'Overpass';font-size: 2.2rem; position: absolute; top:1vh; color:white;"
                                                id="uploadarttext">
                                                Upload art </label>
                                            <input class="d-none form-control col-12" type="file" name="file"
                                                id="uploadfile" />
                                        </div>

                                    </div>


                                </div>

                                <div class="card-body p-0">
                                    <div class="container p-3">

                                        <label for="uploaddisplayname"
                                            style="font-family: 'Overpass';font-size: 1.3rem;">
                                            Display
                                            name </label>
                                        <input class="form-control" type="text" name="displayname"
                                            id="uploaddisplayname" style="border-radius: 20px;">
                                        <label for="uploadprice"
                                            style="padding-top: 1vh;font-family: 'Overpass';font-size: 1.3rem;"> Price
                                            USD
                                        </label>
                                        <input pattern="^(0|[1-9][0-9]*)$" class="form-control" type="text" name="price"
                                            id="uploadprice" style="border-radius: 20px;">
                                        <div style="padding-bottom: 1vh"></div>

                                    </div>
                                    <div class="container-fluid p-0 cardprice cardborder" style="padding-top: 1vh">
                                        <div class="row  py-2">
                                            <label class="uploadhover" for="uploadsubmitbutton" id="publishbuttonhover">
                                                Publish </label>
                                            <input class="d-none" type="submit" id="uploadsubmitbutton" />
                                        </div>
                                    </div>
                                </div>

                            </form>
                        </div>
                    </div>
                    <div class="col-md-6" style="padding: 2vh;">
                        <div class="card">
                            <img class="card-img-top d-none" src="" alt="Card image cap" id="changingimage">
                            <div class="card-body p-0">
                                <div class="container p-3">
                                    <h5 class="card-title" id="displaynametarget"> Display name </h5>
                                    <p class="card-text">@{{ current_user.username }}</p>
                                </div>
                                <div class="container-fluid p-0 cardprice cardborder">
                                    <div class="row  py-2 px-2">
                                        <div class="col float-left card-money-left" id="pricechangetarget">$</div>
                                        <div class="col float-right card-money-right">USD</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {% endif %}

            {% for art in createdartpieces %}

            <div class="col-xxl-2 col-lg-3 col-md-4 col-sm-6 px-3" style="overflow: hidden">
                <div class="card clickablecard" id="img{{art.filename[:-4]}}">
                    <img class="card-img-top"
                        src="{{url_for('static', filename='images/artpieces_thumb/'+ art.filename)}}"
                        alt="Card image cap">
                    <div class="card-body p-0">
                        <div class="container p-3">
                            <h5 class="card-title"> {{ art.displayname }}</h5>
                            <p class="card-text">@{{ art.madeby }}</p>
                        </div>
                        <div class="container-fluid p-0 cardprice cardborder">
                            <div class="row  py-2 px-2">
                                <div class="col float-left card-money-left">${{ art.price }}</div>
                                <div class="col float-right card-money-right">USD</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {% endfor %}

        </div>
    </div>

</div>




<div class="jumbotron jumbotron-fluid page-end-container" style="height: 80vh">
    <div class="container-fluid page-end-black textloop-container">
        <p class="textloopjumbo py-5">
            <span>MADE BY VINEET MADE BY VINEET MADE BY VINEET MADE BY VINEET MADE BY VINEET MADE BY
                VINEET MADE
                BY
                VINEET MADE BY VINEET MADE BY VINEET MADE BY VINEET MADE BY VINEET MADE BY VINEET
                MADE BY VINEET
                MADE BY
                VINEET &nbsp;</span>
        </p>
    </div>
</div>



<div class="modal fade2 blur" id="loginsignup" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content modal-container">
            <div class="container p-5">

                <div class="row">
                    <div class="col modal-button">
                        <div class="py-4">
                            <div type="text" id="login" class="white-btn btn">Log in</div>
                        </div>
                    </div>
                    <div class="col modal-button">
                        <div class="py-4">
                            <div type="text" id="signup" class="white-btn btn">Sign up</div>
                        </div>
                    </div>
                </div>

                <form id="loginform" method="POST" action="/">
                    <div class="form-group py-2">
                        <div class="div" style="color: red"> username case sensitive</div>
                        {{ loginform.hidden_tag() }}
                        {{ wtf.form_field(loginform.loginUsername) }}
                    </div>
                    <div class="form-group py-2">
                        {{ wtf.form_field(loginform.password) }}
                    </div>
                    <div class="form-group py-2">
                        {{ wtf.form_field(loginform.remember) }}
                    </div>
                    <div class="col">
                        <div class="py-4"><button type="submit" class="black-btn btn">Submit</button></div>
                    </div>
                </form>


                <form class="d-none" id="signupform" method="POST" action="/">
                    <div class="form-group py-2">
                        {{ signupform.hidden_tag() }}
                        {{ wtf.form_field(signupform.signupUsername) }}
                    </div>
                    <div class="form-group py-2">
                        {{ wtf.form_field(signupform.email) }}
                    </div>
                    <div class="form-group py-2">
                        {{ wtf.form_field(signupform.password) }}
                    </div>
                    <div class="col">
                        <div class="py-4"><button type="submit" class="black-btn btn">Submit</button></div>
                    </div>
                </form>
            </div>


        </div>
    </div>
</div>

<script src="/static/js/app.js"></script>
<script src="/static/js/profilepage.js"></script>

{% endblock %}